import"normalize.css";import"./styles/main.scss";document.body.insertAdjacentHTML("afterbegin",'\n<div class="wrapper">\n    <div class="container">\n        <div class="top">\n            <div class="top__buttons">\n                <button class="button button_start">Shuffle and start</button>\n                <button class="button button_save">Save</button>\n                <button class="button button_results">Results</button>\n            </div>\n            <div class="top__info">\n                <div class="info__moves">Мoves:</div>\n                <div class="info__time">Time: 0:00</div>\n            </div>\n        </div>\n\n        <div class="field">\n        </div>\n\n        <div class="bottom">\n            <div class="radio-button">\n                <input id="radio-3" type="radio" name="radio" value="3">\n                <label for="radio-3">3x3</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-4" type="radio" name="radio" value="4" checked>\n                <label for="radio-4">4x4</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-5" type="radio" name="radio" value="5">\n                <label for="radio-5">5x5</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-6" type="radio" name="radio" value="6">\n                <label for="radio-6">6x6</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-7" type="radio" name="radio" value="7">\n                <label for="radio-7">7x7</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-8" type="radio" name="radio" value="8">\n                <label for="radio-8">8x8</label>\n            </div>\n        </div>\n    </div>\n</div>\n');const field=document.querySelector(".field"),animationSpeed=1e3;let mode=4,cellSize=getCellSize(field,mode);function getCellSize(e,t){return e.getBoundingClientRect().width/t}function resizeWidthOnly(e,t){let l=[window.innerWidth];return onresize=function(){let n=window.innerWidth,o=l.length;l.push(n),l[o]!==l[o-1]&&(clearTimeout(t),t=setTimeout(e,50))},e}window.addEventListener("resize",(()=>{cellSize=getCellSize(field,mode),regenerateCells(cells)}),!1),resizeWidthOnly((function(){cellSize=getCellSize(field,mode)}));let amountOfCells=mode*mode,numbers=[...Array(amountOfCells).keys()],cells=[],empty={value:amountOfCells,top:mode-1,left:mode-1};cells.push(empty);const buttonShuffleStart=document.querySelector(".button_start"),maxShuffleCount=100;let timer,shuffleCounter=0;function isFinished(){if(cells.every((e=>e.value===e.top*mode+e.left+1))){console.log("won");const e=document.createElement("div");return e.className="message",e.innerHTML="«Hooray! You solved the puzzle in ##:## and N moves!»",field.append(e),!0}return!1}function isValidToSwap(e){return!(Math.abs(empty.left-e.left)+Math.abs(empty.top-e.top)>1)}function swap(e){const t=cells[e];isValidToSwap(t)&&(t.element.style.left=empty.left*cellSize+"px",t.element.style.top=empty.top*cellSize+"px",[empty.left,t.left]=[t.left,empty.left],[empty.top,t.top]=[t.top,empty.top]),setTimeout(isFinished,1e3)}buttonShuffleStart.addEventListener("click",(()=>{clearInterval(timer),0==shuffleCounter&&(timer=setInterval((()=>{radnomSwap(),shuffleCounter++,shuffleCounter>=100&&clearInterval(timer)}),20)),blockedCell=null}));let blockedCell=null;function radnomSwap(){const e=[];for(let t=0;t<cells.length;t++)isValidToSwap(cells[t])&&cells[t]!=empty&&e.push(t);let t=Math.floor(Math.random()*e.length);for(;blockedCell===cells[e[t]];)t=Math.floor(Math.random()*e.length);swap(e[t]),blockedCell=cells[e[t]]}function regenerateCells(e){for(let t of e)t!=empty&&(t.element.style.left=t.left*cellSize+"px",t.element.style.top=t.top*cellSize+"px",t.element.style.width=100/mode+"%",t.element.style.height=100/mode+"%")}function generateCells(e){let t=0,l=0;for(let n=1;n<amountOfCells;n++){const o=document.createElement("div"),i=e[n-1]+1;o.className="cell",o.innerHTML=i,t==mode&&(t=0,l++),o.style.left=t*cellSize+"px",o.style.top=l*cellSize+"px",o.style.width=100/mode+"%",o.style.height=100/mode+"%",cells.push({value:i,left:t,top:l,element:o}),t++,o.addEventListener("click",(()=>{swap(n)})),field.append(o)}}generateCells(numbers);const fontSizes={3:12,4:10,5:8,6:7,7:6,8:5},radoButtons=document.getElementsByName("radio");radoButtons.forEach((e=>e.addEventListener("click",(()=>{mode=e.value,field.innerHTML="",amountOfCells=mode*mode,numbers=[...Array(amountOfCells).keys()],cells=[],empty={value:amountOfCells,top:mode-1,left:mode-1},cells.push(empty),cellSize=getCellSize(field,mode),generateCells(numbers),regenerateCells(cells),document.querySelectorAll(".cell").forEach((e=>{e.style.fontSize=`${fontSizes[mode]}vmin`}))})))),window.addEventListener("keydown",(e=>{if(!e.key.includes("Arrow"))return;const t=e.key.split("Arrow")[1].toLowerCase(),l={left:empty.left,top:empty.top};switch(t){case"up":l.top-=1;break;case"down":l.top+=1;break;case"left":l.left-=1;break;case"right":l.left+=1}if(!(l.left>=mode||l.left<0||l.top>=mode||l.top<0))for(let e=0;e<cells.length;e++)cells[e].left===l.left&&cells[e].top===l.top&&swap(e)}));