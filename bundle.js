(()=>{"use strict";document.body.insertAdjacentHTML("afterbegin",'\n    <div class="container">\n        <div class="top">\n                <div class="info__moves-note">Ðœoves: <span class="info__moves">0</span></div>\n                <button class="menu-button">Menu</button>\n                <div class="info__time-note">Time: <span class="info__time">00:00</span></div>\n        </div>\n\n        <div class="menu">\n            <button class="menu__button button_start">New game</button>\n            <button class="menu__button button_save">Save</button>\n            <button class="menu__button button_load">Load</button>\n            <button class="menu__button button_results">Results</button>\n            <span class="menu__text">*You can use arrows to play</span>\n        </div>\n\n        <div class="field">\n            <div class="message">\n            </div>\n        </div>\n\n        <div class="bottom">\n            <div class="radio-button">\n                <input id="radio-3" type="radio" name="radio" value="3">\n                <label for="radio-3">3x3</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-4" type="radio" name="radio" value="4" checked>\n                <label for="radio-4">4x4</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-5" type="radio" name="radio" value="5">\n                <label for="radio-5">5x5</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-6" type="radio" name="radio" value="6">\n                <label for="radio-6">6x6</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-7" type="radio" name="radio" value="7">\n                <label for="radio-7">7x7</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-8" type="radio" name="radio" value="8">\n                <label for="radio-8">8x8</label>\n            </div>\n        </div>\n    </div>\n');const e=document.querySelector(".menu-button"),t=document.querySelector(".menu"),n=document.querySelector(".button_start"),o=(document.querySelector(".button_save"),document.querySelector(".button_load"),document.querySelector(".button_results"),document.querySelector(".info__time")),l=document.querySelector(".info__moves"),i=document.getElementsByName("radio");e.disabled=!0;let a=!0;e.addEventListener("click",(()=>{x?(e.disabled=!0,y.innerHTML="",t.classList.remove("hidden"),y.classList.remove("hidden"),x=!1,a=!0):a?(s=setInterval(v,1e3),t.classList.add("hidden"),y.classList.add("hidden"),a=!1):(clearInterval(s),t.classList.remove("hidden"),y.classList.remove("hidden"),a=!0),i.forEach((e=>{e.disabled=!e.disabled}))}),!1),n.addEventListener("click",(()=>{t.classList.add("hidden"),e.disabled=!1,a=!1,clearInterval(k),0==M&&(k=setInterval((()=>{if(function(){const e=[];for(let t=0;t<g.length;t++)E(g[t])&&g[t]!=w&&e.push(t);let t=Math.floor(Math.random()*e.length);for(;S===g[e[t]];)t=Math.floor(Math.random()*e.length);q(e[t]),S=g[e[t]]}(),M++,M>=2)return clearInterval(k),void(M=0)}),20)),S=null,setTimeout((()=>{c(),s=setInterval(v,1e3),f(),y.classList.add("hidden"),y.innerHTML=""}),1200),i.forEach((e=>{e.disabled=!0}))})),i.forEach((n=>n.addEventListener("click",(()=>{H(n),clearInterval(s),y.innerHTML="",y.classList.remove("hidden"),t.classList.remove("hidden"),e.disabled=!0}))));let s,d=0,r=0,u=0;function c(){clearInterval(s),d=0,r=0,o.innerText="00:00"}function v(){d++,d<60&&(o.innerText=`${r<10?"0"+r:r}:${d<10?"0"+d:d}`,console.log("tick")),d>59&&(d=0,r++,o.innerText=`${r}:${d}`,console.log("tack")),r>59&&alert("Get rest, bro!")}function f(){u=0,l.innerText="0"}const m=document.querySelector(".field");let b=4,p=h(m,b);function h(e,t){return e.getBoundingClientRect().width/t}window.addEventListener("resize",(()=>{p=h(m,b),I(g)}),!1),function(e,t){let n=[window.innerWidth];onresize=function(){let o=window.innerWidth,l=n.length;n.push(o),n[l]!==n[l-1]&&(clearTimeout(t),t=setTimeout(e,50))}}((function(){p=h(m,b)}));let y=document.querySelector(".message"),_=b*b,L=[...Array(_).keys()],g=[],w={value:_,top:b-1,left:b-1};g.push(w);let x=!1;function T(){return g.every((e=>e.value===e.top*b+e.left+1))&&(clearInterval(s),y.classList.remove("hidden"),y.innerHTML=`Hooray!<br> You solved the puzzle <br>in ${r}:${d} and ${u} moves!`,a=!1,x=!0),!1}let k,M=0,S=null;function q(e){const t=g[e];E(t)&&(t.element.style.left=w.left*p+"px",t.element.style.top=w.top*p+"px",[w.left,t.left]=[t.left,w.left],[w.top,t.top]=[t.top,w.top],u++,l.innerText=`${u}`),setTimeout(T,1e3)}function E(e){return!(Math.abs(w.left-e.left)+Math.abs(w.top-e.top)>1)}function H(e){b=e.value,m.innerHTML="",m.insertAdjacentHTML("afterbegin",'<div class="message"></div>'),y=document.querySelector(".message"),c(),f(),_=b*b,L=[...Array(_).keys()],g=[],w={value:_,top:b-1,left:b-1},g.push(w),p=h(m,b),function(e){let t=0,n=0;for(let o=1;o<_;o++){const l=document.createElement("div"),i=e[o-1]+1;l.className="cell",l.innerHTML=i,t==b&&(t=0,n++),l.style.left=t*p+"px",l.style.top=n*p+"px",l.style.width=100/b+"%",l.style.height=100/b+"%",g.push({value:i,left:t,top:n,element:l}),t++,l.addEventListener("click",(()=>{q(o)})),m.append(l)}}(L),I(g);let t=document.querySelectorAll(".cell");const n={3:12,4:10,5:8,6:7,7:6,8:5};t.forEach((e=>{e.style.fontSize=`${n[b]}vmin`}))}function I(e){for(let t of e)t!=w&&(t.element.style.left=t.left*p+"px",t.element.style.top=t.top*p+"px",t.element.style.width=100/b+"%",t.element.style.height=100/b+"%")}H(i[1]),window.addEventListener("keydown",(e=>{if(e.key.includes("Arrow")&&!a){const t=e.key.split("Arrow")[1].toLowerCase(),n={left:w.left,top:w.top};switch(t){case"up":n.top-=1;break;case"down":n.top+=1;break;case"left":n.left-=1;break;case"right":n.left+=1}if(n.left>=b||n.left<0||n.top>=b||n.top<0)return;for(let e=0;e<g.length;e++)g[e].left===n.left&&g[e].top===n.top&&q(e)}}))})();