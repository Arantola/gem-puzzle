(()=>{"use strict";document.body.insertAdjacentHTML("afterbegin",'\n<div class="wrapper">\n    <div class="container">\n        <div class="top">\n            <div class="top__buttons">\n                <button class="button button_start">Shuffle and start</button>\n                <button class="button button_save">Save</button>\n                <button class="button button_results">Results</button>\n            </div>\n            <div class="top__info">\n                <div class="info__moves">Мoves:</div>\n                <div class="info__time">Time: 0:00</div>\n            </div>\n        </div>\n\n        <div class="field">\n        </div>\n\n        <div class="bottom">\n            <div class="radio-button">\n                <input id="radio-3" type="radio" name="radio" value="3">\n                <label for="radio-3">3x3</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-4" type="radio" name="radio" value="4" checked>\n                <label for="radio-4">4x4</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-5" type="radio" name="radio" value="5">\n                <label for="radio-5">5x5</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-6" type="radio" name="radio" value="6">\n                <label for="radio-6">6x6</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-7" type="radio" name="radio" value="7">\n                <label for="radio-7">7x7</label>\n            </div>\n            <div class="radio-button">\n                <input id="radio-8" type="radio" name="radio" value="8">\n                <label for="radio-8">8x8</label>\n            </div>\n        </div>\n    </div>\n</div>\n');const e=document.querySelector(".field");let t=4,n=o(e,t);function o(e,t){return e.getBoundingClientRect().width/t}window.addEventListener("resize",(()=>{n=o(e,t),b(a)}),!1),function(e,t){let n=[window.innerWidth];onresize=function(){let o=window.innerWidth,l=n.length;n.push(o),n[l]!==n[l-1]&&(clearTimeout(t),t=setTimeout(e,50))}}((function(){n=o(e,t)}));let l=t*t,i=[...Array(l).keys()],a=[],d={value:l,top:t-1,left:t-1};a.push(d);const r=document.querySelector(".button_start");let s,u=0;function c(){if(a.every((e=>e.value===e.top*t+e.left+1))){console.log("won");const t=document.createElement("div");return t.className="message",t.innerHTML="«Hooray! You solved the puzzle in ##:## and N moves!»",e.append(t),!0}return!1}function f(e){return!(Math.abs(d.left-e.left)+Math.abs(d.top-e.top)>1)}function v(e){const t=a[e];f(t)&&(t.element.style.left=d.left*n+"px",t.element.style.top=d.top*n+"px",[d.left,t.left]=[t.left,d.left],[d.top,t.top]=[t.top,d.top]),setTimeout(c,1e3)}r.addEventListener("click",(()=>{clearInterval(s),0==u&&(s=setInterval((()=>{!function(){const e=[];for(let t=0;t<a.length;t++)f(a[t])&&a[t]!=d&&e.push(t);let t=Math.floor(Math.random()*e.length);for(;p===a[e[t]];)t=Math.floor(Math.random()*e.length);v(e[t]),p=a[e[t]]}(),u++,u>=100&&clearInterval(s)}),20)),p=null}));let p=null;function b(e){for(let o of e)o!=d&&(o.element.style.left=o.left*n+"px",o.element.style.top=o.top*n+"px",o.element.style.width=100/t+"%",o.element.style.height=100/t+"%")}function m(o){let i=0,d=0;for(let r=1;r<l;r++){const l=document.createElement("div"),s=o[r-1]+1;l.className="cell",l.innerHTML=s,i==t&&(i=0,d++),l.style.left=i*n+"px",l.style.top=d*n+"px",l.style.width=100/t+"%",l.style.height=100/t+"%",a.push({value:s,left:i,top:d,element:l}),i++,l.addEventListener("click",(()=>{v(r)})),e.append(l)}}m(i);const h={3:12,4:10,5:8,6:7,7:6,8:5};document.getElementsByName("radio").forEach((r=>r.addEventListener("click",(()=>{t=r.value,e.innerHTML="",l=t*t,i=[...Array(l).keys()],a=[],d={value:l,top:t-1,left:t-1},a.push(d),n=o(e,t),m(i),b(a),document.querySelectorAll(".cell").forEach((e=>{e.style.fontSize=`${h[t]}vmin`}))})))),window.addEventListener("keydown",(e=>{if(!e.key.includes("Arrow"))return;const n=e.key.split("Arrow")[1].toLowerCase(),o={left:d.left,top:d.top};switch(n){case"up":o.top-=1;break;case"down":o.top+=1;break;case"left":o.left-=1;break;case"right":o.left+=1}if(!(o.left>=t||o.left<0||o.top>=t||o.top<0))for(let e=0;e<a.length;e++)a[e].left===o.left&&a[e].top===o.top&&v(e)}))})();